{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.6d44d4bd21e17dda8f05.hot-update.js","sources":["webpack:///./components/post.js","webpack:///./components/posts.js","webpack:///./pages/index.js"],"sourcesContent":["import {useEffect, useState} from \"react\";\r\n\r\nconst postStyle = {\r\n    display: \"flex\",\r\n    flexDirection: \"column\"\r\n};\r\nexport default function Post({handlePostListOpen, id}) {\r\n    const [post, setPost] = useState(null);\r\n    useEffect(() => {\r\n        const storage = window.localStorage;\r\n        const postsJson = storage.getItem(\"posts\");\r\n        const posts = JSON.parse(postsJson);\r\n        const currentPost = posts.find((post) => post.id === +id);\r\n        if (!currentPost.comments) {\r\n            (\r\n                async () => {\r\n                    const res = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}/comments`);\r\n                    currentPost.comments = await res.json();\r\n                    window.localStorage.setItem(\"posts\", JSON.stringify(posts));\r\n                    setPost(currentPost);\r\n                }\r\n            )().catch((error) => console.log(error))\r\n        }\r\n\r\n    }, []);\r\n\r\n    const handleBackClick = () => {\r\n        handlePostListOpen();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {\r\n                post ? <div style={postStyle}>\r\n                    <button onClick={handleBackClick}>Back to posts page</button>\r\n                    <span> User: {post.userId}</span>\r\n                    <span>Post Title: {post.title}</span>\r\n                    <span>Post Body: {post.body}</span>\r\n                    <ul>\r\n                        {\r\n                            post.comments &&\r\n                            post.comments.map((comment) => {\r\n                                return (\r\n                                    <li>\r\n                                        <div>Username: {comment.name}</div>\r\n                                        <div>{comment.body}</div>\r\n                                    </li>\r\n                                )\r\n                            })\r\n                        }\r\n                    </ul>\r\n                </div> :\r\n                    <div>Loading...</div>\r\n            }\r\n        </>\r\n\r\n    )\r\n}","import {useEffect, useState} from \"react\";\r\n\r\nfunction PostList({handlePostOpen}) {\r\n    const [posts, setPosts] = useState([]);\r\n    useEffect(() => {\r\n        (\r\n            async () => {\r\n                const res = await fetch(`https://jsonplaceholder.typicode.com/posts`);\r\n                const data = await res.json();\r\n\r\n                window.localStorage.setItem(\"posts\", JSON.stringify(data));\r\n                setPosts(data);\r\n            }\r\n        )().catch((error) => console.log(error))\r\n    }, []);\r\n\r\n    const handlePostClick = (event) => {\r\n        const id = event.currentTarget.getAttribute(\"data-id\");\r\n        handlePostOpen(id)\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div>Posts Page</div>\r\n            <ul>\r\n                {\r\n                    posts.length !== 0 &&\r\n                    posts.map((element) => {\r\n                        return (\r\n                            <li onClick={handlePostClick} data-id={element.id}>\r\n                                <div>User: {element.userId}</div>\r\n                                <div>Post Title: {element.title}</div>\r\n                                <div>Post Body: {element.body}</div>\r\n                            </li>\r\n                        )\r\n                    })\r\n                }\r\n            </ul>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default PostList","import React, {useEffect, useState} from \"react\";\r\nimport Login from \"../components/login\";\r\nimport PostList from \"../components/posts\";\r\nimport Post from \"../components/post\";\r\n\r\nexport default function Index() {\r\n    const [isLoginPage, setPage] = useState(true);\r\n    const [postId, setPostId] = useState(\"\");\r\n    useEffect(() => {\r\n        debugger\r\n        const storage = window.localStorage;\r\n        const activePostId = storage.getItem(\"postId\");\r\n        const token = storage.getItem(\"token\");\r\n\r\n        if (!token) {\r\n            setPage(true)\r\n        } else {\r\n            if (activePostId !== \"\") {\r\n                setPostId(activePostId)\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    const handlePostOpen = (id) => {\r\n        setPostId(id);\r\n        window.localStorage.setItem(\"postId\", id);\r\n    };\r\n\r\n    const handlePostListOpen = () => {\r\n        setPostId(\"\");\r\n        window.localStorage.setItem(\"postId\", \"\");\r\n    };\r\n\r\n    const handleSignIn = (password) => {\r\n        const token = btoa(password);\r\n        window.localStorage.setItem(\"token\", token);\r\n        setPage(false);\r\n    };\r\n\r\n    const drawPage = () => {\r\n        if (isLoginPage) {\r\n            return (\r\n                <Login handleSignIn={handleSignIn}/>\r\n            )\r\n        } else if (postId === \"\") {\r\n            return (\r\n                <PostList handlePostOpen={handlePostOpen} />\r\n                )\r\n        } else {\r\n            return (\r\n                <Post handlePostListOpen={handlePostListOpen} id={postId}/>\r\n            )\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {\r\n                drawPage()\r\n            }\r\n        </div>\r\n    );\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AAFA;AAIA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;;;;;;;;;;;;;;;;;;ACzDA;AACA;AACA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AACA;AADA;AAEA;AAEA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAKA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AC1CA;AACA;AACA;AACA;AAEA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;A","sourceRoot":""}