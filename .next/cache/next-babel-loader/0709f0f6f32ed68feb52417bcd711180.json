{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"E:\\\\postapp\\\\pages\\\\app.js\";\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from \"react\";\nimport Login from \"../components/login\";\nimport PostList from \"../components/posts\";\nimport Post from \"../components/post\";\nimport { SET_TOKEN } from \"../store/actions\";\nimport connect from \"react-redux/lib/connect/connect\";\n\nvar App = function App(_ref) {\n  var token = _ref.token;\n\n  var _useState = useState(true),\n      isLoginPage = _useState[0],\n      setPage = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      postId = _useState2[0],\n      setPostId = _useState2[1];\n\n  useEffect(function () {\n    var storage = window.localStorage;\n    var activePostId = storage.getItem(\"postId\");\n    var token = storage.getItem(\"token\");\n\n    if (!token) {\n      setPage(true);\n    } else {\n      if (activePostId !== \"\") {\n        setPostId(activePostId);\n        setPage(false);\n      } else {\n        setPage(false);\n      }\n    }\n  }, []);\n\n  var handlePostOpen = function handlePostOpen(id) {\n    setPostId(id);\n    window.localStorage.setItem(\"postId\", id);\n  };\n\n  var handlePostListOpen = function handlePostListOpen() {\n    setPostId(\"\");\n    window.localStorage.setItem(\"postId\", \"\");\n  };\n\n  var handleSignIn = function handleSignIn(password) {\n    var token = btoa(password);\n    SET_ACTIVE_TOKEN(token);\n    window.localStorage.setItem(\"token\", token);\n    setPage(false);\n  };\n\n  var drawPage = function drawPage() {\n    if (isLoginPage) {\n      return __jsx(Login, {\n        handleSignIn: handleSignIn,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 17\n        }\n      });\n    } else if (postId === \"\") {\n      return __jsx(PostList, {\n        handlePostOpen: handlePostOpen,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 17\n        }\n      });\n    } else {\n      return __jsx(Post, {\n        handlePostListOpen: handlePostListOpen,\n        id: postId,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }\n      });\n    }\n  };\n\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, drawPage());\n};\n\nvar mapStateToProps = function mapStateToProps(store) {\n  return function () {\n    return {\n      token: store.token\n    };\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    SET_ACTIVE_TOKEN: function SET_ACTIVE_TOKEN(token) {\n      return dispatch(SET_TOKEN(token));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["E:/postapp/pages/app.js"],"names":["React","useEffect","useState","Login","PostList","Post","SET_TOKEN","connect","App","token","isLoginPage","setPage","postId","setPostId","storage","window","localStorage","activePostId","getItem","handlePostOpen","id","setItem","handlePostListOpen","handleSignIn","password","btoa","SET_ACTIVE_TOKEN","drawPage","mapStateToProps","store","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport Login from \"../components/login\";\r\nimport PostList from \"../components/posts\";\r\nimport Post from \"../components/post\";\r\nimport {SET_TOKEN} from \"../store/actions\";\r\nimport connect from \"react-redux/lib/connect/connect\";\r\n\r\nconst App = ({token}) => {\r\n    const [isLoginPage, setPage] = useState(true);\r\n    const [postId, setPostId] = useState(\"\");\r\n    useEffect(() => {\r\n        const storage = window.localStorage;\r\n        const activePostId = storage.getItem(\"postId\");\r\n        const token = storage.getItem(\"token\");\r\n\r\n        if (!token) {\r\n            setPage(true);\r\n        } else {\r\n            if (activePostId !== \"\") {\r\n                setPostId(activePostId);\r\n                setPage(false);\r\n            } else {\r\n                setPage(false)\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    const handlePostOpen = (id) => {\r\n        setPostId(id);\r\n        window.localStorage.setItem(\"postId\", id);\r\n    };\r\n\r\n    const handlePostListOpen = () => {\r\n        setPostId(\"\");\r\n        window.localStorage.setItem(\"postId\", \"\");\r\n    };\r\n\r\n    const handleSignIn = (password) => {\r\n        const token = btoa(password);\r\n        SET_ACTIVE_TOKEN(token);\r\n        window.localStorage.setItem(\"token\", token);\r\n        setPage(false);\r\n    };\r\n\r\n    const drawPage = () => {\r\n        if (isLoginPage) {\r\n            return (\r\n                <Login handleSignIn={handleSignIn}/>\r\n            )\r\n        } else if (postId === \"\") {\r\n            return (\r\n                <PostList handlePostOpen={handlePostOpen} />\r\n            )\r\n        } else {\r\n            return (\r\n                <Post handlePostListOpen={handlePostListOpen} id={postId}/>\r\n            )\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            {\r\n                drawPage()\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (store) => {\r\n    return () => {\r\n        return {\r\n            token: store.token\r\n        }\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    SET_ACTIVE_TOKEN: (token) => dispatch(SET_TOKEN(token)),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(App);"]},"metadata":{},"sourceType":"module"}